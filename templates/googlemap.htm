<div class="panel stylesheet-panel">

    <h2>Google Maps</h2>
    <div class="help-btn" data-popup-button="googleMapsHelp">?</div>

    <!-- Select Type -->
    <div class="select-box" title="Type" data-ng-model="g.googleMap.type">
        <div class="display">
            <span class="title">Type</span>
            <span class="value"></span>
        </div>
        <ul data-transition-height="select.isOpen">
            <li data-value="typescript">TS</li>
            <!-- <li data-value="json">JSON</li> -->
        </ul>
    </div>

    <!-- Select Indent -->
    <div class="select-box" title="Indent" data-ng-model="g.googleMap.indent">
        <div class="display">
            <span class="title">Indent</span>
            <span class="value"></span>
        </div>
        <ul data-transition-height="select.isOpen">
            <li data-value="2">2 <span class="unit-of-measure">spaces</span></li>
            <li data-value="4">4 <span class="unit-of-measure">spaces</span></li>
            <li data-value="6">6 <span class="unit-of-measure">spaces</span></li>
            <li data-value="8">8 <span class="unit-of-measure">spaces</span></li>
        </ul>
    </div>

    <a href="#" class="icon settings" title="Advanced Settings"
       data-toggle="g.googleMap.showSettings"></a>

    <div class="settings-box" data-transition-height="g.googleMap.showSettings">
        <ul>
            <li data-mode="retina">
                <div class="settings-input">
                    <!-- retina file name -->
                    <div class="control textbox">
                        <input type="text" id="retina-file-name"
                               data-ng-model="g.googleMap.retinaName">

                        <label for="retina-file-name">
                            <span class="title">
                                Retina File
                            </span>
                            <span class="value">
                               <span>{{g.googleMap.retinaName || 'icons-retina'}}</span>
                            </span>
                        </label>
                    </div>
                </div>
                <span class="settings-descr">
                    The name of the retina image file.
                </span>
            </li>
            <li data-mode="retina">
                <div class="settings-input">
                    <div class="control textbox">
                        <input type="text" id="normal-file-name"
                               data-ng-model="g.googleMap.imageName">

                        <label for="normal-file-name">
                            <span class="title">
                                Normal File
                            </span>
                            <span class="value">
                               <span>{{g.googleMap.imageName || 'icons'}}</span>
                            </span>
                        </label>
                    </div>
                </div>
                <span class="settings-descr">
                    The name of the normal size image file.
                </span>
            </li>
            <li data-mode="normal">
                <div class="settings-input">
                    <div class="control textbox">
                        <input type="text" id="file-name"
                               data-ng-model="g.googleMap.imageName">

                        <label for="file-name">
                            <span class="title">
                                File
                            </span>
                            <span class="value">
                               <span>{{g.googleMap.imageName || 'icons'}}</span>
                            </span>
                        </label>
                    </div>
                </div>
                <span class="settings-descr">
                    The name of the image file.
                </span>
            </li>
            <li>
                <div class="settings-input">
                    <div class="control textbox">
                        <input type="text" id="zoom-factor-gm"
                               data-ng-model="g.googleMap.zoomFactor">

                        <label for="zoom-factor-gm">
                            <span class="title">
                                Zoom factor
                            </span>
                            <span class="value">
                               <span>{{g.googleMap.zoomFactor || 1}}</span>
                            </span>
                        </label>
                    </div>
                </div>
                <span class="settings-descr">
                    The name of the sprite CSS class.
                </span>
            </li>
            <li>
                <div class="settings-input">
                    <div class="control textbox">
                        <input type="text" id="sprite-name-gm"
                               data-ng-model="g.googleMap.spriteName">

                        <label for="sprite-name-gm">
                            <span class="title">
                                Class Name
                            </span>
                            <span class="value">
                               <span>{{g.googleMap.spriteName || 'icon'}}</span>
                            </span>
                        </label>
                    </div>
                </div>
                <span class="settings-descr">
                    The name of the sprite CSS class.
                </span>
            </li>
            <li>
                <div class="settings-input">
                    <div class="control textbox">
                        <input type="text" id="class-prefix-gm"
                               data-ng-model="g.googleMap.prefix">

                        <label for="class-prefix-gm">
                            <span class="title">
                                Prefix
                            </span>
                            <span class="value">
                               <span>{{g.googleMap.prefix || '[none]'}}</span>
                            </span>
                        </label>
                    </div>
                </div>
                <span class="settings-descr">
                    A prefix to attach to all icon class names.
                </span>
            </li>
            <li>
                <div class="settings-input">
                    <div class="control textbox">
                        <input type="text" id="class-suffix-gm"
                               data-ng-model="g.googleMap.suffix">

                        <label for="class-suffix-gm">
                            <span class="title">
                                Suffix
                            </span>
                            <span class="value">
                               <span>{{g.googleMap.suffix || '[none]'}}</span>
                            </span>
                        </label>
                    </div>
                </div>
                <span class="settings-descr">
                    A suffix to attach to all icon class names.
                </span>
            </li>
        </ul>
    </div>


    <!-- Type script Preview-->
    <div class="stylesheet-container" data-ng-class="{hidden:g.googleMap.type!=='typescript'}">

        <div class="stylesheet-header">
            <a href="#" class="icon copy" title="Copy common source to Clipboard" data-copy-btn="headerTypescript-gm" data-on-success="confirmCopy(true)" data-on-fail="confirmCopy(false)"></a>

            <span class="copy-confirm copy-success hidden" data-ng-class="{'hidden':!s.msg.copy || !s.msg.copy.isSuccess, 'priority': !s.msg.copy || s.msg.copy.isSuccess}">
                CSS stylesheet copied to your clipboard.
            </span>
            <span class="copy-confirm copy-error hidden" data-ng-class="{'hidden':!s.msg.copy || s.msg.copy.isSuccess, 'priority': !s.msg.copy || !s.msg.copy.isSuccess}">
                Unable to copy stylesheet to your clipboard. Try manual copy.
            </span>
        </div>

        <div class="stylesheet">

            <space-indent id="headerTypescript-gm" class="ng-cloak" data-spaces="g.googleMap.indent" data-update="spriteData">
                <div>export interface SpriteDef {</div>
                    <div>    url: string;</div>
                    <div>    size:  google.maps.Size;</div>
                    <div>    spriteSize:  google.maps.Size;</div>
                    <div>    position: google.maps.Point; </div>
                    <div>}</div>
                    <div></div>
                    <div>
                        export const <span class="css-selector">sprites = getSprites(2)</span>;
                    </div>
                    <div></div>
                    <div>
                        const <span class="css-selector">URL = '{{g.googleMap.imageName || 'icons'}}.png'</span>;
                    </div>
    
            </space-indent>
        </div>
    </div>
    <div class="stylesheet-container" data-ng-class="{hidden:g.googleMap.type!=='typescript'}">
        <div class="stylesheet-header">
            <a href="#" class="icon copy" title="Copy Source to Clipboard" data-copy-btn="cssStylesheet-gm" data-on-success="confirmCopy(true)" data-on-fail="confirmCopy(false)"></a>

            <span class="copy-confirm copy-success hidden" data-ng-class="{'hidden':!s.msg.copy || !s.msg.copy.isSuccess, 'priority': !s.msg.copy || s.msg.copy.isSuccess}">
                CSS stylesheet copied to your clipboard.
            </span>
            <span class="copy-confirm copy-error hidden" data-ng-class="{'hidden':!s.msg.copy || s.msg.copy.isSuccess, 'priority': !s.msg.copy || !s.msg.copy.isSuccess}">
                Unable to copy stylesheet to your clipboard. Try manual copy.
            </span>
        </div>

        <div class="stylesheet">

            <space-indent id="cssStylesheet-gm" class="ng-cloak" data-spaces="g.googleMap.indent" data-update="spriteData">

                <div>
                const getSprites = (zoomFactor: number): { [key: string]: SpriteDef } => {
       
                <div>
                    const <span class="css-selector">{{g.googleMap.spriteName || 'baseSprite'}}</span> = {
                </div>
                </div>

                <div class="css-property-group">
                    <div class="css-property" data-indent><span class="css-property-name">url</span>: URL<span class="css-property-value"></span>,
                    </div>
                    <div class="css-property" data-indent><span class="css-property-name">size</span>: new google.maps.Size({{spriteData.cmw}} * zoomFactor, {{spriteData.cmh}} * zoomFactor, 'px', 'px'),
                    </div>
                    <div class="css-property" data-indent><span class="css-property-name">spriteSize</span>: new google.maps.Size({{spriteData.w}} * zoomFactor, {{spriteData.h}} * zoomFactor, 'px', 'px'),
                    </div>
                </div>
                }
                <div>
                    const <span class="css-selector">sprites</span>: {[key: string]: SpriteDef} = {
                </div>
                <!-- Property Repeater -->
                <div data-ng-repeat="item in spriteData" class="css-entry" data-indent>

                    <div>
                        '<span class="css-selector name">{{g.googleMap.prefix}}{{item.name}}{{g.googleMap.suffix}}</span>' : {...{{g.googleMap.spriteName || 'baseSprite'}},
                    </div>

                    <div class="css-property-group">
                        <div class="css-property" data-indent><span class="css-property-name">position</span>: new google.maps.Point({{(item.x || 0)}} * zoomFactor, {{(item.y || 0)}} * zoomFactor),
                        </div>
                    </div>
                    },
                </div>
            };
            <div>
                return sprites;
            </div>
        }
                <div data-mode="retina" data-indent></div>
            </space-indent>
        </div>
    </div>

    <!-- SCSS Preview-->
    <div class="stylesheet-container hidden" data-ng-class="{'hidden':g.googleMap.type!=='json'}">

        <div class="stylesheet-header">
            <a href="#" class="icon copy" data-copy-btn="scssStylesheet-gm" data-on-success="confirmCopy(true)" data-on-fail="confirmCopy(false)" title="Copy Stylesheet to Clipboard"></a>
            <span class="copy-confirm copy-success hidden" data-ng-class="{'hidden':!s.msg.copy || !s.msg.copy.isSuccess, 'priority': !s.msg.copy || s.msg.copy.isSuccess}">SCSS stylesheet copied to your clipboard.</span>
            <span class="copy-confirm copy-error hidden" data-ng-class="{'hidden':!s.msg.copy || s.msg.copy.isSuccess, 'priority': !s.msg.copy || !s.msg.copy.isSuccess}">Unable to copy stylesheet to your clipboard. Try manual copy.</span>
        </div>

        <div class="stylesheet">

            <!-- Stylesheet -->
            <space-indent data-spaces="g.googleMap.indent" data-update="spriteData" id="scssStylesheet-gm">

                <div>
                    .<span class="css-selector">{{g.googleMap.spriteName || 'icon'}}</span> {
                </div>
                <div class="css-property-group">
                    <div class="css-property" data-indent><span class="css-property-name">background</span>: <span class="css-property-value">url</span>(<span class="css-property-value">'{{g.googleMap.imageName || 'icons'}}.png'</span>)
                        <span class="css-property-value">no-repeat top left</span>;</div>
                    <div class="css-property" data-indent data-ng-class="{'hidden':!spriteData.cmw}"><span class="css-property-name">width</span>: <span class="css-property-value number">{{spriteData.cmw}}px</span>;</div>
                    <div class="css-property" data-indent data-ng-class="{'hidden':!spriteData.cmh}"><span class="css-property-name">height</span>: <span class="css-property-value number">{{spriteData.cmh}}px</span>;</div>

                    <div data-mode="retina" data-indent></div>

                    <!-- SCSS Media Query-->
                    <div data-mode="retina">
                        <div data-indent><span class="css-selector">@media</span> (<span class="css-property-name">-webkit-min-device-pixel-ratio</span>:
                            <span class="css-property-value number">2</span>), (<span class="css-property-name">min-resolution</span>: <span class="css-property-value number">192dpi</span>) {


                            <div class="css-property-group">
                                <div class="css-property" data-indent><span class="css-property-name">background</span>: <span class="css-property-value">url</span>(<span class="css-property-value">'{{g.googleMap.retinaName || 'icons-retina'}}.png'</span>)
                                    <span class="css-property-value">no-repeat top left</span>;
                                </div>
                                <div class="css-property" data-indent><span class="css-property-name">background-size</span>:
                                    <span class="css-property-value number">{{spriteData.w}}px</span>
                                    <span class="css-property-value number">{{spriteData.h}}px</span>;
                                </div>
                            </div>
                        </div>
                        <div data-indent>}</div>
                    </div>
                </div>

                <!-- Property Repeater -->
                <div data-indent data-ng-class="{'hidden':!spriteData || !spriteData.length}"></div>

                <div data-ng-repeat="item in spriteData" class="css-entry">

                    <div data-indent>&amp;.<span class="css-selector name">{{g.googleMap.prefix}}{{item.name}}{{g.googleMap.suffix}}</span> {</div>

                    <div class="css-property-group" data-indent-container>
                        <div class="css-property" data-indent><span class="css-property-name">background-position</span>:
                            <span class="css-property-value number">{{item.x !== 0 ? '-' : ''}}{{item.x}}{{item.x !== 0 ? 'px' : ''}}</span>
                            <span class="css-property-value number">{{item.y !== 0 ? '-' : ''}}{{item.y}}{{item.y !== 0 ? 'px' : ''}}</span>;
                        </div>
                        <div class="css-property" data-indent data-ng-class="{'hidden':!item.w}"><span class="css-property-name">width</span>: <span class="css-property-value number">{{item.w}}px</span>;
                        </div>
                        <div class="css-property" data-indent data-ng-class="{'hidden':!item.h}"><span class="css-property-name">height</span>: <span class="css-property-value number">{{item.h}}px</span>;
                        </div>
                    </div>
                    <span data-indent>}</span>
                </div>
                }
            </space-indent>
        </div>
    </div>

    <!-- Stylesheet Help -->
    <div id="googleMapsHelp" class="help-container" data-popup-box>

        <h3>Primary Controls</h3>

        <div class="help-content">
            <ul>
                <li>
                    <span class="term">Type</span>
                    <span class="def">
                        The google maps output type. The default is 'TS'. You can also select 'JSON' if 
                        you would prefer json output.
                    </span>
                </li>
                <li>
                    <span class="term">Indent</span>
                    <span class="def">
                        The indent spacing to use.
                    </span>
                </li>
            </ul>
        </div>

        <h3>Copy to Clipboard</h3>
        <div class="help-content">
            <p>
                You can copy source to your clipboard easily by pressing the button located just above the generated code. If your browser does not support copy operations, you can still manually copy the text by right-clicking the selected text and choose 'Copy'.
            </p>
        </div>

        <h3>Advanced</h3>

        <div class="help-content">
            <ul>
                <li>
                    <span class="term">Retina Image Name</span>
                    <span class="def">
                        The name of the Retina sprite file. Leave blank for default. The default 
                        value is 'icons-retina'.
                    </span>
                </li>

                <li>
                    <span class="term">Normal Image Name</span>
                    <span class="def">
                        The name of the normal sprite file. Leave blank for default. The default 
                        value is 'icons'.
                    </span>
                </li>
                <li>
                    <span class="term">Sprite Class Name</span>
                    <span class="def">
                        The CSS class name of the sprite. Leave blank for default. The default 
                        value is 'icon'.
                    </span>
                </li>
                <li>
                    <span class="term">Class Prefix</span>
                    <span class="def">
                        The prefix to attach to all icon class names. The icon class name is 
                        the name of the file.
                    </span>
                </li>
                <li>
                    <span class="term">Class Suffix</span>
                    <span class="def">
                        The suffix to attach to all icon class names. The icon class name is 
                        the name of the file.
                    </span>
                </li>
            </ul>
        </div>
    </div>
</div>